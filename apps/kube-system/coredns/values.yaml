---
controllers: {}

configMaps:
  corefile:
    enabled: true
    forceRename: coredns
    data:
      Corefile: |-
        edgard.org:53 {
            errors
            hosts {
                192.168.1.241 id.edgard.org
                fallthrough
            }
            forward . 192.168.1.1
            cache 30
            log
        }

        .:53 {
            errors
            health {
               lameduck 5s
            }
            ready
            kubernetes cluster.local in-addr.arpa ip6.arpa {
               pods verified
               fallthrough in-addr.arpa ip6.arpa
               ttl 30
            }
            autopath @kubernetes
            prometheus :9153
            forward . /etc/resolv.conf {
               max_concurrent 1000
            }
            cache 30 {
               disable success cluster.local
               disable denial cluster.local
               prefetch 20
               serve_stale
            }
            loop
            reload
            loadbalance
        }
