---
apiVersion: metacontroller.k8s.io/v1alpha1
kind: CompositeController
metadata:
  name: gatus-config
  labels:
    app.kubernetes.io/name: gatus-config
    app.kubernetes.io/part-of: gatus
spec:
  generateSelector: true
  parentResource:
    apiVersion: homelab.edgard.org/v1alpha1
    resource: gatusconfigs
  childResources:
    - apiVersion: v1
      resource: configmaps
      updateStrategy:
        method: InPlace
  hooks:
    sync:
      webhook:
        service:
          name: gatus-config-sync
          namespace: ops
          port: 80
        path: /sync
        timeout: 15s
