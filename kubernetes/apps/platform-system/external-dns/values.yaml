fullnameOverride: external-dns

image:
  repository: registry.k8s.io/external-dns/external-dns
  tag: v0.19.0
  pullPolicy: IfNotPresent

logLevel: info
logFormat: text
interval: 1m
triggerLoopOnEvent: true

serviceAccount:
  create: true
  name: external-dns
  automountServiceAccountToken: true

rbac:
  create: true

sources:
  - ingress
  - crd

policy: sync
registry: txt
txtOwnerId: home-ops
txtPrefix: "k8s."
domainFilters:
  - edgard.org

provider:
  name: cloudflare

env:
  - name: CF_API_TOKEN
    valueFrom:
      secretKeyRef:
        name: external-dns-cloudflare
        key: cloudflare_api_token

extraArgs:
  - --cloudflare-proxied
  - --cloudflare-dns-records-per-page=1000
  - --crd-source-apiversion=externaldns.k8s.io/v1alpha1
  - --crd-source-kind=DNSEndpoint

livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 30
  periodSeconds: 30
  timeoutSeconds: 5
  failureThreshold: 5
  successThreshold: 1

readinessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 15
  periodSeconds: 15
  timeoutSeconds: 5
  failureThreshold: 3
  successThreshold: 1

podAnnotations:
  reloader.stakater.com/auto: "true"

serviceMonitor:
  enabled: false
