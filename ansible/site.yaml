---
- name: Manage PVE hosts
  hosts: pve_servers
  remote_user: root
  roles:
    - config_ssh_keys
    - config_cron_powersave
    - install_unattended_upgrades
  tags: ["pve"]

- name: Manage DNS hosts
  hosts: dns_servers
  remote_user: root
  roles:
    - config_ssh_keys
    - config_cron_powersave
    - install_unattended_upgrades
    - setup_dns_server
  tags: ["dns"]

- name: Manage KUB hosts
  hosts: kub_servers
  remote_user: edgard
  become: true
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - config_disable_swap
    - remove_snapd
    - install_unattended_upgrades
    - install_backup
    - install_common_vm
    - setup_kub_server
  tags: ["kub"]

- name: Manage KLIPPER hosts
  hosts: klipper_servers
  remote_user: edgard
  become: true
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - remove_snapd
    - install_unattended_upgrades
    - install_backup
    - install_common_vm
    - setup_klipper_server
  tags: ["klipper"]

- name: Manage DEVL hosts
  hosts: devl_servers
  remote_user: edgard
  become: true
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - remove_snapd
    - install_unattended_upgrades
    - install_backup
    - install_docker
    - install_common_vm
    - setup_devl_server
  tags: ["devl"]
