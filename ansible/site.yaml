---
- name: Manage PVE hosts
  hosts: pve_servers
  roles:
    - config_ssh_keys
    - config_cron_powersave
    - remove_common
  tags: ["pve"]

- name: Manage DNS hosts
  hosts: dns_servers
  roles:
    - config_ssh_keys
    - config_cron_powersave
    - config_dietpi_apt
    - remove_common
    - setup_dns_server
  tags: ["dns"]

- name: Manage KUB hosts
  hosts: kub_servers
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - config_disable_swap
    - remove_snapd
    - remove_common
    - install_backup
    - install_common_vm
    - setup_kub_server
  tags: ["kub"]

- name: Manage KLIPPER hosts
  hosts: klipper_servers
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - remove_snapd
    - remove_common
    - install_backup
    - install_common_vm
    - setup_klipper_server
  tags: ["klipper"]

- name: Manage HASS hosts
  hosts: hass_servers
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - remove_snapd
    - remove_common
    - install_backup
    - install_docker
    - install_common_vm
    - setup_hass_server
  tags: ["hass"]

- name: Manage PLEX hosts
  hosts: plex_servers
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - remove_snapd
    - remove_common
    - install_backup
    - install_docker
    - install_common_vm
    - setup_plex_server
  tags: ["plex"]

- name: Manage DEVL hosts
  hosts: devl_servers
  roles:
    - config_ssh_keys
    - config_sudo_nopass
    - config_timezone
    - remove_snapd
    - remove_common
    - install_backup
    - install_docker
    - install_common_vm
    - setup_devl_server
  tags: ["devl"]
