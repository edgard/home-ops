---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: cert-manager
  namespace: platform-system
spec:
  releaseName: cert-manager
  interval: 30m
  driftDetection:
    mode: enabled
  chartRef:
    kind: OCIRepository
    name: cert-manager
  values:
    replicaCount: 1
    strategy:
      type: Recreate
    installCRDs: true
    global:
      leaderElection:
        namespace: platform-system
    livenessProbe:
      initialDelaySeconds: 30
      periodSeconds: 30
      timeoutSeconds: 5
      failureThreshold: 5
    webhook:
      replicaCount: 1
      strategy:
        type: Recreate
      livenessProbe:
        failureThreshold: 5
        initialDelaySeconds: 30
        periodSeconds: 30
        timeoutSeconds: 5
      readinessProbe:
        initialDelaySeconds: 15
        periodSeconds: 15
        timeoutSeconds: 5
    cainjector:
      replicaCount: 1
      strategy:
        type: Recreate
