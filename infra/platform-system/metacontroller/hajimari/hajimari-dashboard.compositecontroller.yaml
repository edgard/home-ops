---
apiVersion: metacontroller.k8s.io/v1alpha1
kind: CompositeController
metadata:
  name: edge-services-hajimari-dashboard
  labels:
    app.kubernetes.io/name: hajimari-dashboard
    app.kubernetes.io/part-of: hajimari
spec:
  generateSelector: true
  resyncPeriodSeconds: 60
  parentResource:
    apiVersion: homelab.edgard.org/v1alpha1
    resource: hajimaridashboards
  childResources:
    - apiVersion: v1
      resource: configmaps
      updateStrategy:
        method: InPlace
  hooks:
    sync:
      webhook:
        service:
          name: hajimari-dashboard-sync
          namespace: edge-services
          port: 80
        path: /sync
        timeout: 10s
