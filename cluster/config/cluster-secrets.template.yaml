---
# Template used when bootstrapping `cluster-secrets.sops.yaml`.
# Replace every placeholder before encrypting the real secret bundle.
apiVersion: v1
kind: Secret
metadata:
  name: cluster-secrets
  namespace: platform-system
type: Opaque
stringData:
  flux_sync_username: "<git-username>"
  flux_sync_password: "<git-password>"
  arc_runners_github_app_id: "<github-app-id>"
  arc_runners_github_app_installation_id: "<github-app-installation-id>"
  arc_runners_github_app_private_key: |-
    -----BEGIN RSA PRIVATE KEY-----
    <github-app-private-key>
    -----END RSA PRIVATE KEY-----
  qbittorrent_server_cities: "<comma-separated-city-list>"
  qbittorrent_wireguard_addresses: "<wireguard-address-cidr>"
  qbittorrent_wireguard_private_key: "<wireguard-private-key>"
  unpackerr_radarr_api_key: "<radarr-api-key>"
  unpackerr_sonarr_api_key: "<sonarr-api-key>"
  cert_manager_cloudflare_api_token: "<cloudflare-api-token>"
  cloudflared_tunnel_token: "<cloudflared-tunnel-token>"
  dex_config_yaml: |-
    issuer: https://id.example.com
    storage:
      type: sqlite3
      config:
        file: /data/dex.db
    web:
      http: 0.0.0.0:5556
    telemetry:
      http: 0.0.0.0:5558
    logger:
      level: info
    frontend:
      issuer: Example Identity
    oauth2:
      skipApprovalScreen: true
    enablePasswordDB: true
    staticPasswords:
      - email: admin@example.com
        hash: "<bcrypt-hash>"
        username: admin
    staticClients:
      - id: envoy-gateway
        name: Envoy Gateway
        redirectURIs:
          - https://status.example.com/oauth2/callback
          - https://zigbee2mqtt.example.com/oauth2/callback
          - https://bazarr.example.com/oauth2/callback
          - https://radarr.example.com/oauth2/callback
          - https://sonarr.example.com/oauth2/callback
          - https://prowlarr.example.com/oauth2/callback
          - https://qbittorrent.example.com/oauth2/callback
          - https://jellyfin.example.com/oauth2/callback
          - https://kopia.example.com/oauth2/callback
          - https://echo.example.com/oauth2/callback
          - https://changedetection.example.com/oauth2/callback
        secret: "<envoy-oidc-client-secret>"
  external_dns_cloudflare_api_token: "<cloudflare-api-token>"
  external_dns_unifi_api_key: "<unifi-api-key>"
  kopia_password: "<kopia-password>"
  envoy_gateway_oidc_client_secret: "<envoy-oidc-client-secret>"
  gatus_telegram_token: "<telegram-bot-token>"
  gatus_telegram_chat_id: "<telegram-chat-id-for-alerts>"
  changedetection_api_key: "<changedetection-api-key>"
  changedetection_notification_url: "tgram://<bot-token>/<chat-id>"
